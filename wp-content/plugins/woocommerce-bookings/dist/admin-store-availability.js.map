{"version":3,"file":"admin-store-availability.js","mappings":"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","sources":["webpack://woocommerce-bookings/webpack/bootstrap","webpack://woocommerce-bookings/webpack/runtime/compat get default export","webpack://woocommerce-bookings/webpack/runtime/define property getters","webpack://woocommerce-bookings/webpack/runtime/hasOwnProperty shorthand","webpack://woocommerce-bookings/external window \"React\"","webpack://woocommerce-bookings/external window [\"wp\",\"element\"]","webpack://woocommerce-bookings/external window \"lodash\"","webpack://woocommerce-bookings/external window [\"wp\",\"components\"]","webpack://woocommerce-bookings/external window [\"wp\",\"i18n\"]","webpack://woocommerce-bookings/external window \"moment\"","webpack://woocommerce-bookings/./src/js/components/store-availability-popover/index.js","webpack://woocommerce-bookings/./src/js/admin-store-availability.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"React\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"element\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"lodash\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"components\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"i18n\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"moment\"];","/**\n * External dependencies\n */\nimport { Button, DatePicker, Popover, SelectControl, TextControl } from '@wordpress/components';\nimport { __, sprintf } from '@wordpress/i18n';\nimport { useState } from '@wordpress/element';\nimport moment from 'moment';\n\n/**\n * Internal dependencies\n */\nimport './style.scss';\n\nconst AVAILABILITY_ALL_DAY        = '1';\nconst AVAILABILITY_SPECIFIC_HOURS = '2';\n\nconst DOES_NOT_REPEAT        = '1';\nconst REPEATS_WEEKLY         = '2';\nconst REPEATS_YEARLY         = '3';\nconst REPEATS_SPECIFIC_DAYS  = '4';\nconst REPEATS_SPECIFIC_DATES = '5';\n\nfunction StoreAvailabilityPopover( props ) {\n\tconst [ isPopoverVisible, setPopoverVisible ]               = useState( true );\n\tconst [ startDate, setStartDate ]                           = useState( props.selectedDate || new Date() );\n\tconst [ needsEndDate, setNeedsEndDate ]                     = useState( false );\n\tconst [ endDate, setEndDate ]                               = useState( props.selectedDate || new Date() );\n\tconst [ isDatePickerVisible, setDatePickerVisible ]         = useState( false );\n\tconst [ availabilityTime, setAvailabilityTime ]             = useState( AVAILABILITY_ALL_DAY );\n\tconst [ availabilityTimeFrames, setAvailabilityTimeFrames ] = useState( [ ] );\n\tconst [ frequency, setFrequency ]                           = useState( DOES_NOT_REPEAT );\n\tconst [ repeatDaysOfWeek, setRepeatDaysOfWeek ]             = useState();\n\n\tconst selectedDayOfWeek = moment( props.selectedDate ).format( 'dddd' );\n\tconst selectedDay       = moment( props.selectedDate ).format( 'MMMM D' );\n\n\tfunction popoverContent() {\n\t\treturn ( <div className=\"wb__sap\">\n\t\t\t<h4 className=\"wb__sap__heading\">{ __( 'Edit Availability', 'woocommerce-bookings' ) }</h4>\n\t\t\t<div className=\"wb__sap__start-end-dates wb__sap__row\">\n\t\t\t\t<TextControl className=\"wb__sap__start-date\" label={ __( 'Start Date', 'woocommerce-bookings' ) } onClick={ selectStartDate } value={ formatDate( startDate ) }/>\n\t\t\t\t{ !needsEndDate ? (\n\t\t\t\t\t<span className=\"wb__sap__add-end-date\" onClick={ selectEndDate }>{ __( 'Add end date', 'woocommerce-bookings' ) }</span>\n\t\t\t\t) : (\n\t\t\t\t\t<TextControl className=\"wb__sap__end-date\" label={ __( 'End Date', 'woocommerce-bookings' ) } onClick={ selectEndDate } value={ formatDate( endDate ) }/>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t\t<div className=\"wb__sap__time wb__sap__row\">\n\t\t\t\t<SelectControl label={ __( 'Time', 'woocommerce-bookings' ) } className=\"wb__sap__time-selector\" value={ availabilityTime } onChange={ changeAvailabilityTime } options={\n\t\t\t\t\t[\n\t\t\t\t\t\t{ label: __( 'Available all day', 'woocommerce-bookings' ), value: AVAILABILITY_ALL_DAY },\n\t\t\t\t\t\t{ label: __( 'Available at specific hours', 'woocommerce-bookings' ), value: AVAILABILITY_SPECIFIC_HOURS }\n\t\t\t\t\t]\n\t\t\t\t} />\n\t\t\t\t{ isAvailableAtSpecificHours() && renderTimeFrames( availabilityTimeFrames, setAvailabilityTimeFrames ) }\n\t\t\t</div>\n\t\t\t<div className=\"wb__sap__frequency wb__sap__row\">\n\t\t\t\t<SelectControl label={ __( 'Frequency', 'woocommerce-bookings' ) } className=\"wb__sap__frequency-selector\" value={ frequency } onChange={ changeFrequency } options={\n\t\t\t\t\t[\n\t\t\t\t\t\t{ label:  __( 'Does not repeat', 'woocommerce-bookings' ) , value: DOES_NOT_REPEAT },\n\t\t\t\t\t\t/* translators: %s: day of week */\n\t\t\t\t\t\t{ label:  sprintf( __( 'Every %s', 'woocommerce-bookings' ), selectedDayOfWeek ) , value: REPEATS_WEEKLY },\n\t\t\t\t\t\t/* translators: %s: day of year */\n\t\t\t\t\t\t{ label:  sprintf(  __( 'Anually on %s', 'woocommerce-bookings' ), selectedDay ) , value: REPEATS_YEARLY },\n\t\t\t\t\t\t{ label:  __( 'On specific days of the week', 'woocommerce-bookings' ) , value: REPEATS_SPECIFIC_DAYS },\n\t\t\t\t\t\t{ label:  __( 'On specific dates', 'woocommerce-bookings' ) , value: REPEATS_SPECIFIC_DATES }\n\t\t\t\t\t]\n\t\t\t\t} />\n\t\t\t\t{ doesRepeatSpecificDaysOfWeek() &&\n\t\t\t\t\t<div className=\"wb__sap__frequency-days-of-week wb__sap__row\">\n\t\t\t\t\t\t<span>{ __( 'Repeats on:', 'woocommerce-bookings' ) }</span>\n\t\t\t\t\t\t<ul className=\"wb__sap__days-of-week-selector\">\n\t\t\t\t\t\t\t{ daysOfWeekSelector( changeRepeatDayOfWeek, repeatDaysOfWeek ) }\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</div>\n\t\t\t\t}\n\t\t\t</div>\n\t\t\t<div className=\"wb__sap__actions wb__sap__row\">\n\t\t\t\t<Button className=\"wb__sap__cancel\" isTertiary isLink onClick={ closePopover }>{ __( 'Cancel', 'woocommerce-bookings' ) }</Button>\n\t\t\t\t<Button className=\"wb__sap__apply\" isDefault isPrimary>{ __( 'Apply', 'woocommerce-bookings' ) }</Button>\n\t\t\t</div>\n\t\t</div> );\n\t}\n\n\tfunction datePicker() {\n\t\treturn (\n\t\t\t<Popover className=\"wb__sap_date-picker\" position=\"middle center\" onClickOutside={ () => setDatePickerVisible( false ) } focusOnMount={ false }>\n\t\t\t\t<DatePicker\n\t\t\t\t\tcurrentDate={ startDate }\n\t\t\t\t\tonChange={ ( date ) => {\n\t\t\t\t\t\tsetDatePickerVisible( false );\n\t\t\t\t\t\tupdateDate( date )\n\t\t\t\t\t} }\n\t\t\t\t/>\n\t\t\t</Popover>\n\t\t);\n\t}\n\n\tfunction selectStartDate() {\n\t\tsetDatePickerVisible( !isDatePickerVisible )\n\t\tupdateDate = setStartDate;\n\t}\n\n\tfunction selectEndDate() {\n\t\tsetNeedsEndDate( true );\n\t\tsetDatePickerVisible( !isDatePickerVisible )\n\t\tupdateDate = setEndDate;\n\t}\n\n\tfunction changeAvailabilityTime( newAvailabilityTime ) {\n\t\tsetAvailabilityTime( newAvailabilityTime );\n\t\tif ( availabilityTimeFrames.length === 0 ) {\n\t\t\tavailabilityTimeFrames.push( [ '0', '0' ] );\n\t\t\tsetAvailabilityTimeFrames( availabilityTimeFrames );\n\t\t}\n\t}\n\n\tfunction isAvailableAtSpecificHours() {\n\t\treturn availabilityTime === AVAILABILITY_SPECIFIC_HOURS;\n\t}\n\n\tfunction changeFrequency( newFrequency ) {\n\t\tsetFrequency( newFrequency );\n\t}\n\n\tfunction doesRepeatSpecificDaysOfWeek() {\n\t\treturn frequency === REPEATS_SPECIFIC_DAYS;\n\t}\n\n\tfunction changeRepeatDayOfWeek( event ) {\n\t\tconst dayOfWeek = parseInt(event.target.value);\n\t\tlet selectedDays = repeatDaysOfWeek || [];\n\t\tif ( !selectedDays.includes( dayOfWeek ) ) {\n\t\t\tselectedDays.push( dayOfWeek );\n\t\t} else {\n\t\t\tselectedDays = selectedDays.filter( day => day !== dayOfWeek );\n\t\t}\n\n\t\tsetRepeatDaysOfWeek( selectedDays.slice() );\n\t}\n\n\tfunction closePopover() {\n\t\tif ( ! isDatePickerVisible ) {\n\t\t\tsetPopoverVisible( false );\n\t\t}\n\t}\n\n\treturn (\n\t\tisPopoverVisible && <div className=\"wb__sap__container\">\n\t\t\t<Popover position=\"middle center\" onClickOutside={ closePopover } focusOnMount={ false }>\n\t\t\t\t{ popoverContent() }\n\t\t\t</Popover>\n\t\t\t{ isDatePickerVisible && datePicker() }\n\t\t</div>\n\t);\n}\n\nfunction formatDate( date ) {\n\treturn moment( date ).format( 'MMM DD, YYYY' );\n}\n\nfunction renderTimeFrames( availabilityTimeFrames, setAvailabilityTimeFrames ) {\n\tconst timeFrames = []\n\tfunction changeTimeFrame( timeFrameIndex, comboIndex ) {\n\t\treturn function( newTime ) {\n\t\t\tavailabilityTimeFrames[ timeFrameIndex ][ comboIndex ] = newTime;\n\n\t\t\tsetAvailabilityTimeFrames( availabilityTimeFrames.slice() );\n\t\t}\n\t}\n\n\tfunction addAnotherTimeFrame() {\n\t\tavailabilityTimeFrames.push( [ '0', '0' ] );\n\t\tsetAvailabilityTimeFrames( availabilityTimeFrames.slice() );\n\t}\n\n\tfor (var timeFrameIndex = 0; timeFrameIndex < availabilityTimeFrames.length; timeFrameIndex++) {\n\t\tconst timeFrame = (\n\t\t\t<div key={ timeFrameIndex } className=\"wb__sap__time-frame wb__sap__row\">\n\t\t\t\t{ hoursOfDayCombo( availabilityTimeFrames[timeFrameIndex][0], changeTimeFrame(timeFrameIndex, 0), timeFrameIndex, 0) }\n\t\t\t\t<span>â€”</span>\n\t\t\t\t{ hoursOfDayCombo( availabilityTimeFrames[timeFrameIndex][1], changeTimeFrame(timeFrameIndex, 1), timeFrameIndex, 1) }\n\t\t\t</div> );\n\t\ttimeFrames.push( timeFrame );\n\t}\n\ttimeFrames.push( <div key=\"add-more-times\" className=\"wb__sap__add-new-time-frame\" onClick={ addAnotherTimeFrame }>{ __( 'Add more times', 'woocommerce-bookings' ) }</div> );\n\n\treturn timeFrames;\n}\n\nfunction hoursOfDayCombo( selectedTime, updateSelectedTime, timeFrameIndex, selectIndex ) {\n\tconst options = [];\n\tfor (var hour = 0; hour < 24; hour++) {\n\t\toptions.push(\n\t\t\t{ label:  moment().startOf( 'day' ).add( hour, 'hour' ).format( 'h:mma' ) , value: hour }\n\t\t);\n\t}\n\n\treturn (\n\t\t<SelectControl key={ `${timeFrameIndex}-${selectIndex}` } value={ selectedTime } onChange={ updateSelectedTime } className=\"wb__sap__time-frame-hours-selector\" options={ options } />\n\t);\n}\n\nfunction daysOfWeekSelector( changeRepeatDayOfWeek, repeatDaysOfWeek ) {\n\tconst daysOfWeek = [];\n\tfor ( var dayIndex = 0; dayIndex < 7; dayIndex ++ ) {\n\t\tconst day = moment().startOf( 'week' ).add( dayIndex, 'days' )\n\t\tconst dayOfWeek = day.weekday();\n\t\tconst dayName = day.format( 'dd' );\n\t\tconst selected = ( repeatDaysOfWeek || [] ).includes( dayOfWeek );\n\t\tconst classNames = [ 'wb__sap__day-of-week-button' ]\n\t\tif ( selected ) { classNames.push( 'selected' ); }\n\n\t\tdaysOfWeek.push(\n\t\t\t<li key={ dayIndex }>\n\t\t\t\t<button className={ classNames.join( ' ' ) } onClick={ changeRepeatDayOfWeek } value={ dayOfWeek } data-day={ dayName }>{ dayName }</button>\n\t\t\t</li>\n\t\t);\n\t}\n\n\treturn daysOfWeek;\n}\n\nexport default StoreAvailabilityPopover;\n","/* globals: wc_bookings_admin_calendar_js_params */\n\n/**\n * External dependencies\n */\nimport { render } from '@wordpress/element';\nimport { forEach } from 'lodash';\n\n/**\n * Internal dependencies.\n */\nimport StoreAvailabilityPopover from './components/store-availability-popover';\n\nlet popoverContainer;\n\nconst storeAvailabilityDays = document.getElementsByClassName( 'wc-bookings__store-availability-day' );\n\nif ( null !== storeAvailabilityDays ) {\n\tforEach( storeAvailabilityDays, ( storeAvailabilityDay ) => {\n\t\tstoreAvailabilityDay.addEventListener( 'click', () => {\n\t\t\tconst date = new Date( parseInt( storeAvailabilityDay.dataset.timestamp ) * 1000 /* to milliseconds */ );\n\n\t\t\tif ( popoverContainer ) {\n\t\t\t\tdocument.body.removeChild( popoverContainer );\n\t\t\t}\n \t \t \tpopoverContainer = document.createElement( 'div' );\n\t\t\tdocument.body.appendChild( popoverContainer );\n\n\t\t\trender(<StoreAvailabilityPopover selectedDate={ date }/>, popoverContainer);\n\t\t} );\n\t} )\n}\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","window","formatDate","date","moment","format","hoursOfDayCombo","selectedTime","updateSelectedTime","timeFrameIndex","selectIndex","options","hour","push","label","startOf","add","value","createElement","SelectControl","onChange","className","props","isPopoverVisible","setPopoverVisible","useState","startDate","setStartDate","selectedDate","Date","needsEndDate","setNeedsEndDate","endDate","setEndDate","isDatePickerVisible","setDatePickerVisible","availabilityTime","setAvailabilityTime","availabilityTimeFrames","setAvailabilityTimeFrames","frequency","setFrequency","repeatDaysOfWeek","setRepeatDaysOfWeek","selectedDayOfWeek","selectedDay","selectStartDate","updateDate","selectEndDate","changeAvailabilityTime","newAvailabilityTime","length","changeFrequency","newFrequency","changeRepeatDayOfWeek","event","dayOfWeek","parseInt","target","selectedDays","includes","filter","day","slice","closePopover","Popover","position","onClickOutside","focusOnMount","__","TextControl","onClick","timeFrames","changeTimeFrame","comboIndex","newTime","addAnotherTimeFrame","timeFrame","renderTimeFrames","sprintf","daysOfWeek","dayIndex","weekday","dayName","classNames","join","daysOfWeekSelector","Button","isTertiary","isLink","isDefault","isPrimary","DatePicker","currentDate","popoverContainer","storeAvailabilityDays","document","getElementsByClassName","forEach","storeAvailabilityDay","addEventListener","dataset","timestamp","body","removeChild","appendChild","render","StoreAvailabilityPopover"],"sourceRoot":""}